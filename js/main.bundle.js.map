{"version":3,"file":"main.bundle.js","mappings":"sBAAA,MAQMA,EAAmBC,SAASC,cAAc,wBAC1CC,EAAcF,SAASC,cAAc,6BACrCE,EAAoBH,SAASC,cAAc,yBAC3CG,EAAmBJ,SAASC,cAAc,8BAC1CI,EAAmBL,SAASC,cAAc,wBAEhDC,EAAYI,UAAUC,IAAI,mBAE1B,IAAIC,EAAY,GAEhB,MAAMC,EAAU,CACdC,KAAM,KACJR,EAAYI,UAAUC,IAAI,mBACnB,QAETI,OAAQ,KACNT,EAAYI,UAAUM,OAAO,mBACtB,aAAoD,IAAvCC,SAASR,EAAiBS,MAAO,QAEvDC,MAAO,KACLb,EAAYI,UAAUM,OAAO,mBACtB,SAAgD,IAAvCC,SAASR,EAAiBS,MAAO,QAEnDE,OAAQ,KACNd,EAAYI,UAAUM,OAAO,mBACtB,UAAUK,KAAKC,MAAMb,EAAiBS,YAE/CK,OAAQ,KACNjB,EAAYI,UAAUM,OAAO,mBACtB,QAAgD,EAAvCC,SAASR,EAAiBS,MAAO,IAAW,UAE9DM,KAAM,KACJlB,EAAYI,UAAUM,OAAO,mBACtB,cAAsD,EAAvCC,SAASR,EAAiBS,MAAO,IAAW,SAkBtEf,EAAiBsB,iBAAiB,SAdDC,IAC/B,GAAIA,EAAIC,OAAOjB,UAAUkB,SAAS,oBAAqB,CACnC,KAAdhB,GACFJ,EAAiBE,UAAUM,OAAOJ,GAEpCL,EAAkBsB,WAAWC,IAAI,KACjC,IAAIC,EAAeL,EAAIC,OAAOjB,UAAU,GACxCE,EAAYmB,EAEZvB,EAAiBE,UAAUC,IAAIoB,GAC/BvB,EAAiBwB,MAAMC,OAASpB,EAAQkB,EAAaG,QAAQ,qBAAsB,WAMvFL,WAAWM,OAAO5B,EAAmB,CACnC6B,MAAO,CACLC,IA3DG,EA4DHC,IA7DG,KA+DLC,MA/DK,IAgELC,QAAS,UAGXjC,EAAkBsB,WAAWY,GAAG,UAAU,KACxChC,EAAiBS,MAAQG,KAAKqB,MAAMnC,EAAkBsB,WAAWc,OAEjEnC,EAAiBwB,MAAMC,OAASpB,EAAQD,EAAUsB,QAAQ,qBAAsB,W,SCzElF,MAAMU,EAAa,CAAC,MAAO,OAAQ,MAAO,OAOpCC,EAAazC,SAASC,cAAc,gBAEpCyC,EADyB1C,SAASC,cAAc,wBACTA,cAAc,OACrD0C,EAAW3C,SAAS4C,iBAAiB,qBAE3CH,EAAWpB,iBAAiB,UAAU,KACpC,MAAMwB,EAAOJ,EAAWK,MAAM,GACxBC,EAAWF,EAAKG,KAAKC,cAK3B,GAJgBT,EAAWU,MAAMC,GACxBJ,EAASK,SAASD,KAGd,CACX,MAAME,EAAS,IAAIC,WAEnBD,EAAOhC,iBAAiB,QAAQ,KAC9BqB,EAAca,IAAMF,EAAOG,OAC3Bd,EAAce,MArBX,IAsBHf,EAAcgB,OArBV,IAuBJf,EAASgB,SAAS9B,IAChBA,EAAOD,MAAMgC,gBAAkB,OAAOP,EAAOG,gBAIjDH,EAAOQ,cAAchB,SC/BrBiB,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,IAOV,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,Q,mBCrBf,MAKMG,EAAYhD,GAJX,QAKEA,EAAIiD,KAJH,WAIuBjD,EAAIiD,ICF/BC,EAAaxE,SAASC,cAAc,gBACpCwE,EAAYzE,SAASC,cAAc,QACnCyE,EAAkBF,EAAWvE,cAAc,wBAC3C0E,EAAkB3E,SAASC,cAAc,oBACzC2E,EAAc5E,SAASC,cAAc,qBAE3C,IAAI4E,EAAiB,GAErB,MAAMC,EAAeN,EAAWvE,cAAc,0BACxC8E,EAAiBP,EAAWvE,cAAc,oBAEhD,IAAI+E,EAbuB,EAgB3B,MAAMC,EAAyB,KAC7BT,EAAWlE,UAAUC,IAAI,UACzBkE,EAAUnE,UAAUM,OAAO,cAC3B8D,EAAgBQ,oBAAoB,QAASD,GAC7CL,EAAYO,UAAY,GACxBnF,SAASkF,oBAAoB,UAAWE,GACxCJ,EAtByB,EAuBzBH,EAAiB,IAebQ,EAAkBC,IAMtBN,EAAiBM,EAASC,OA5CD,EA4CgCD,EAASC,OAASP,EAC3EH,EAAiBS,EAASE,MAAM,EAAGR,GAEnCJ,EAAYO,UAAY,GAExBL,EAAaW,YAAc,GAAGZ,EAAeU,aAAaD,EAASC,sBAEnE,IAAIG,EAAuB1F,SAAS2F,yBAEpCd,EAAelB,SAAQiC,IACrBF,EAAqBG,YA1BH,CAACD,IACrB,MAAME,EAAiBnB,EAAgBoB,WAAU,GAMjD,OAJAD,EAAe7F,cAAc,oBAAoBsD,IAAMqC,EAAQI,OAC/DF,EAAe7F,cAAc,oBAAoBgG,IAAML,EAAQ5C,KAC/D8C,EAAe7F,cAAc,iBAAiBwF,YAAcG,EAAQM,QAE7DJ,GAmB4BK,CAAcP,OAGjDhB,EAAYiB,YAAYH,GAEpBJ,EAASC,OA3DY,GA2DmBV,EAAeU,OAASD,EAASC,QAC3ER,EAAezE,UAAUM,OAAO,UAChCmE,EAAe1D,iBAAiB,SArBJ,KAC5BgE,EAAeC,KAoBiD,CAACc,MAAM,KAEvErB,EAAezE,UAAUC,IAAI,UAG/ByE,GAlEyB,GAqErBI,EAA0B9D,IAC1BgD,EAAShD,IACX2D,KCtEEoB,EAAkBrG,SAASC,cAAc,YAAYqG,QAAQrG,cAAc,YAC3EsG,EAAevG,SAASC,cAAc,aAiBtCuG,EAAgBC,IACpB,IAAIC,EAAuB1G,SAAS2F,yBAEpCc,EAAO9C,SAASgD,IACdD,EAAqBb,YAnBL,CAACe,IACnB,MAAMC,EAAeR,EAAgBN,WAAU,GAW/C,OATAc,EAAa5G,cAAc,iBAAiBsD,IAAMqD,EAAQE,IAC1DD,EAAa5G,cAAc,mBAAmBwF,YAAcmB,EAAQG,MACpEF,EAAa5G,cAAc,sBAAsBwF,YAAcmB,EAAQtB,SAASC,OAEhFsB,EAAaxF,iBAAiB,SAAUC,IACtCA,EAAI0F,iBDgEK,CAACJ,IACZ5B,EA7EyB,EA8EzBH,EAAiB,GACjBJ,EAAUnE,UAAUC,IAAI,cACxBiE,EAAWvE,cAAc,2BAA2BsD,IAAMqD,EAAQE,IAClEtC,EAAWvE,cAAc,gBAAgBwF,YAAcmB,EAAQG,MAC/DvC,EAAWvE,cAAc,oBAAoBwF,YAAcmB,EAAQK,YAEnEvC,EAAgBrD,iBAAiB,QAAS4D,GAC1CT,EAAWlE,UAAUM,OAAO,UAE5BZ,SAASqB,iBAAiB,UAAW+D,GAErCC,EAAeuB,EAAQtB,SAASE,UC5E9B0B,CAAKN,MAGAC,GAO4BM,CAAYR,OAG/CJ,EAAaV,YAAYa,IC5BrBU,EAAO,CACXC,IAAK,sDACLC,KAAM,kDAGFC,EAAU,CAACC,EAAWC,EAASC,EAAQC,KAC3CC,MAAMR,EAAKM,GACT,CACEA,OAAQA,EACRG,KAAMF,IAEPG,MAAMC,GAAaA,EAASC,SAC5BF,MAAMC,IACLP,EAAUO,MAEXE,OAAM,KACLR,QCdAS,EAAOlI,SAASC,cAAc,QAC9BkI,EAAgBnI,SAASC,cAAc,UAAUqG,QACjD8B,EAAgBpI,SAAS2F,yBACzB0C,EAAkBrI,SAASC,cAAc,YAAYqG,QACrDgC,EAAkBtI,SAAS2F,yBAE3B4C,EAAqBjH,IACrBgD,EAAShD,IACXkH,KAIEA,EAAgBC,IACpBzI,SAASC,cAAcwI,GAAM7H,SAC7BZ,SAASkF,oBAAoB,UAAWqD,IAGpCG,EAAY,CAACC,EAAMC,KACvB,MAAMC,EAAeV,EAAcpC,WAAU,GAE7C8C,EAAa5I,cAAc,iBAAiBwF,YAAckD,EAC1DE,EAAa5I,cAAc,kBAAkBwF,YAAcmD,EAE3D,MAAME,EAAcD,EAAa5I,cAAc,kBAE/C4I,EAAa5I,cAAc,UAAUoB,iBAAiB,SAAUC,IAChDA,EAAIC,OAAOjB,UACZkB,SAAS,iBACpBgH,EAAa,aAIjBM,EAAYzH,iBAAiB,SAAS,KACpCmH,EAAa,aAGfxI,SAASqB,iBAAiB,UAAWkH,GAErCH,EAAcvC,YAAYgD,GAC1BX,EAAKrC,YAAYuC,IC/Bb,EAAYpI,SAASC,cAAc,QACnC8I,EAAc/I,SAASC,cAAc,wBACrC+I,EAAchJ,SAASC,cAAc,gBACrCgJ,EAAmBjJ,SAASC,cAAc,kBAGhD+I,EAAY3H,iBAAiB,UAAU,KACrC6H,IACAH,EAAYzI,UAAUM,OAAO,UAC7B,EAAUN,UAAUC,IAAI,iBAI1B,MAAM4I,EAAa,KACjBJ,EAAYzI,UAAUC,IAAI,UAC1B,EAAUD,UAAUM,OAAO,cAC3BoI,EAAYlI,MAAQ,IAGtBmI,EAAiB5H,iBAAiB,SAAS,WACzC8H,OAGFnJ,SAASqB,iBAAiB,WAAYC,IAChCgD,EAAShD,IACX6H,OAKJ,MAAMC,EAAaL,EAAY9I,cAAc,2BACvCoJ,EAAcN,EAAY9I,cAAc,4BACxCqJ,EAAaP,EAAY9I,cAAc,0BACvCsJ,EAAeR,EAAY9I,cAAc,8BAEzCiJ,EAAgB,KACpBK,EAAa3H,MAAQ,yBACrB0H,EAAWxI,MAAQ,QAGrBsI,EAAW/H,iBAAiB,SAAS,KACnC,IAAImI,EAAQ3I,SAASyI,EAAWxI,MAAO,IA5CjC,GA8CF0I,GAhDC,MAiDHA,EAjDG,KAoDLF,EAAWxI,MAAQ0I,EAAQ,IAC3BA,GAAgB,IAChBD,EAAa3H,MAAM6H,UAAY,SAAWD,EAAQ,OAGpDH,EAAYhI,iBAAiB,SAAS,KACpC,IAAImI,EAAQ3I,SAASyI,EAAWxI,MAAO,IAxDjC,GA0DF0I,GA3DC,KA4DHA,EA5DG,IA+DLF,EAAWxI,MAAQ0I,EAAQ,IAC3BA,GAAgB,IAChBD,EAAa3H,MAAM6H,UAAY,SAAWD,EAAQ,OAKpD,MAAME,EAAa1J,SAASC,cAAc,qBAEpCuH,EAAY,KDlCE,CAACmB,IACnB,MAAMgB,EAAiBtB,EAAgBtC,WAAU,GAEjD4D,EAAe1J,cAAc,mBAAmBwF,YCgCpC,UD9BZ,MAAMmE,EAAgBD,EAAe1J,cAAc,oBAEnD0J,EAAe1J,cAAc,YAAYoB,iBAAiB,SAAUC,IACpDA,EAAIC,OAAOjB,UACZkB,SAAS,mBACpBgH,EAAa,eAIjBoB,EAAcvI,iBAAiB,SAAS,KACtCmH,EAAa,eAGfxI,SAASqB,iBAAiB,UAAWkH,GAErCD,EAAgBzC,YAAY8D,GAC5BzB,EAAKrC,YAAYyC,ICcjBuB,GACAV,IACAO,EAAWI,SAGPrC,EAAU,KACdiB,EAAU,sBAAuB,0BAInCgB,EAAWrI,iBAAiB,UAAWC,IACrCA,EAAI0F,iBAEJO,EAAQC,EAAWC,EAAS,OAAQ,IAAIsC,SAASzI,EAAIC,Y,OC1FvD,IAIIyI,EAAehK,SAASC,cAAc,mBACtCgK,EAAejK,SAASC,cAAc,sBAE1CgK,EAAa5I,iBAAiB,SAAS,KACrC4I,EAAaC,kBAAkB,IACRD,EAAanJ,MAEfyE,OATC,KAUpB0E,EAAaC,kBAAkB,4BAInCF,EAAa3I,iBAAiB,SAAS,KACrC2I,EAAaE,kBAAkB,IAE/B,IAAIC,EAAYH,EAAalJ,MAAMmC,cAAcmH,OAEjD,IAAKD,EACH,OAGF,IAAIE,EAAaF,EAAUG,MAAM,OAEP,IAAtBD,EAAW9E,SAIW8E,EAAWnH,MAAMqH,GACtB,MAAZA,EAAK,MAGZP,EAAaE,kBAAkB,4CAIJG,EAAWnH,MAAMqH,GAC5B,MAATA,KAGPP,EAAaE,kBAAkB,+CAGLG,EAAWnH,MAAMqH,GACpCA,EAAKC,QAAQ,IAAK,IAAM,KAG/BR,EAAaE,kBAAkB,kCAGNG,EAAWnH,MAAK,CAACqH,EAAME,EAAGC,IAC5CA,EAAIF,QAAQD,EAAME,EAAI,IAAMA,EAAI,KAGvCT,EAAaE,kBAAkB,kCAGXG,EAAWnH,MAAMqH,GAC9BA,EAAKhF,OA7DE,MAgEdyE,EAAaE,kBAAkB,4DAG7BG,EAAW9E,OAlEE,GAmEfyE,EAAaE,kBAAkB,4BAInC,MAAMS,EAAgBrJ,IAChBgD,EAAShD,KACXA,EAAI0F,iBACJ1F,EAAIsJ,oBAIRZ,EAAa3I,iBAAiB,UAAWsJ,GACzCV,EAAa5I,iBAAiB,UAAWsJ,G,OCxEzC,MAGM9I,EAAS7B,SAASC,cAAc,gBACtC,IAAIwG,EAAS,GAQb,MASMoE,EAAU,CACd,iBAAkB,KAChBrE,EAAaC,EAAOjB,MAAM,EAvBD,MAyB3B,gBAAiB,KACfgB,EP1BiB,CAACkE,IACpB,IAAII,EAAGC,EACP,IAAK,IAAIN,EAAIC,EAAInF,OAAS,EAAGkF,EAAI,EAAGA,IAClCK,EAAI7J,KAAKC,MAAMD,KAAK+J,UAAYP,EAAI,IACpCM,EAAOL,EAAII,GACXJ,EAAII,GAAKJ,EAAID,GACbC,EAAID,GAAKM,EAEX,OAAOL,GOkBQO,CAAaxE,EAAOjB,SAASA,MAAM,EAzBxB,KA4B1B,mBAAoB,KAClBgB,EAAaC,EAAOjB,QAAQ0F,MAAK,CAACC,EAAGC,IAC5BA,EAAE9F,SAASC,OAAS4F,EAAE7F,SAASC,YAe5CgC,GAVmBI,IACjB9F,EAAOvB,UAAUM,OAAO,yBACxB6F,EAASkB,EAAKnC,QACdgB,EAAaC,EAAOjB,MAAM,EAvCC,QA0Cb,KACdkD,EAAU,sCAAuC,aAGvB,OAE5B,MAAM2C,EPlCW,CAACC,IAChB,IAAIC,EAAc,KAElB,MAAO,IAAIC,KACLD,GACFE,OAAOC,aAAaH,GAEtBA,EAAcE,OAAOE,YAAW,KO2BL,CAACrK,IAC1BA,EAAIC,OAAOjB,UAAUkB,SAAS,yBAzCfxB,SAASC,cAAc,gCAC7BK,UAAUM,OAAO,+BAGX,MACnB,MAAMgL,EAAS5L,SAAS4C,iBAAiB,YACrCgJ,GACFA,EAAOjI,SAAQkI,IACbA,EAAQjL,aAmCVkL,GACAxK,EAAIC,OAAOjB,UAAUC,IAAI,+BACzBsK,EAAQvJ,EAAIC,OAAOwK,QP/BjBT,IAAME,KAVc,OOoCJQ,GAStBnK,EAAOR,iBAAiB,QAASgK,I","sources":["webpack://kekstagram/./source/js/effects.js","webpack://kekstagram/./source/js/load-file.js","webpack://kekstagram/webpack/bootstrap","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-pictures.js","webpack://kekstagram/./source/js/pictures.js","webpack://kekstagram/./source/js/fetch.js","webpack://kekstagram/./source/js/alerts.js","webpack://kekstagram/./source/js/editor.js","webpack://kekstagram/./source/js/validation.js","webpack://kekstagram/./source/js/main.js"],"sourcesContent":["const DEFAULT_EFFECT_LEVEL = 100;\n\nconst Slider = {\n  MAX: 100,\n  MIN: 0,\n  STEP: 1,\n}\n\nconst effectRadioGroup = document.querySelector('.img-upload__effects');\nconst effectLevel = document.querySelector('.img-upload__effect-level');\nconst effectLevelSlider = document.querySelector('.effect-level__slider');\nconst uploadPreviewImg = document.querySelector('.img-upload__preview > img');\nconst effectLevelValue = document.querySelector('.effect-level__value');\n\neffectLevel.classList.add('visually-hidden');\n\nlet lastClass = '';\n\nconst effects = {\n  none: () => {\n    effectLevel.classList.add('visually-hidden')\n    return 'none';\n  },\n  chrome: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `grayscale(${parseInt(effectLevelValue.value, 10) * 0.01})`;\n  },\n  sepia: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `sepia(${parseInt(effectLevelValue.value, 10) * 0.01})`;\n  },\n  marvin: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `invert(${Math.floor(effectLevelValue.value)}%)`;\n  },\n  phobos: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `blur(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01}px)`;\n  },\n  heat: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `brightness(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01})`;\n  },\n}\n\nconst onEffectRadioGroupClick = (evt) => {\n  if (evt.target.classList.contains('effects__preview')) {\n    if (lastClass !== '') {\n      uploadPreviewImg.classList.remove(lastClass);\n    }\n    effectLevelSlider.noUiSlider.set(100);\n    let currentClass = evt.target.classList[1];\n    lastClass = currentClass;\n\n    uploadPreviewImg.classList.add(currentClass);\n    uploadPreviewImg.style.filter = effects[currentClass.replace('effects__preview--', '')]();\n  }\n};\n\neffectRadioGroup.addEventListener('click', onEffectRadioGroupClick)\n\nnoUiSlider.create(effectLevelSlider, {\n  range: {\n    min: Slider.MIN,\n    max: Slider.MAX,\n  },\n  start: Slider.MAX,\n  connect: 'lower',\n});\n\neffectLevelSlider.noUiSlider.on('change', () => {\n  effectLevelValue.value = Math.round(effectLevelSlider.noUiSlider.get());\n\n  uploadPreviewImg.style.filter = effects[lastClass.replace('effects__preview--', '')]();\n});\n\n","const FILE_TYPES = ['jpg', 'jpeg', 'img', 'png'];\n\nconst Picture = {\n  WIDTH: 600,\n  HEIGHT: 600,\n};\n\nconst uploadFile = document.querySelector('#upload-file');\nconst uploadPreviewContainer = document.querySelector('.img-upload__preview');\nconst uploadPreview = uploadPreviewContainer.querySelector('img');\nconst previews = document.querySelectorAll('.effects__preview');\n\nuploadFile.addEventListener('change', () => {\n  const file = uploadFile.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      uploadPreview.src = reader.result;\n      uploadPreview.width = Picture.WIDTH;\n      uploadPreview.height = Picture.HEIGHT;\n\n      previews.forEach((filter) => {\n        filter.style.backgroundImage = `url(${reader.result})`;\n      });\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const Keys = {\n  ESC: 'Esc',\n  ESCAPE: 'Escape',\n}\n\nconst checkEsc = (evt) => {\n  return evt.key === Keys.ESC || evt.key === Keys.ESCAPE;\n}\n\n// перемешиваем массив\nconst shuffleArray = (arr) => {\n  let j, temp;\n  for (let i = arr.length - 1; i > 0; i--) {\n    j = Math.floor(Math.random() * (i + 1));\n    temp = arr[j];\n    arr[j] = arr[i];\n    arr[i] = temp;\n  }\n  return arr;\n}\n\n// таймаут запроса\nconst DEBOUNCE_INTERVAL = 500\n\nconst debounce = (cb) => {\n  let lastTimeout = null;\n\n  return (...args) => {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = window.setTimeout(() => {\n      cb(...args);\n    }, DEBOUNCE_INTERVAL);\n  };\n};\n\nconst getRandomInt = function (min, max) {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (max < min) {\n    [min, max] = [max, min]\n  }\n\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// Проверка строки\nconst stringCount = (text, sign) => {\n  return text.length <= sign ? true : false;\n}\n\n// Случайный элемент массива\nconst getRandomElementArr = (array) => {\n  return array[getRandomInt(0, array.length - 1)];\n}\n\nexport { getRandomInt, stringCount, getRandomElementArr, checkEsc, shuffleArray, debounce };\n","import { checkEsc } from './util.js';\n\nconst COMMENTS_LOAD_STEP = 5;\n\nconst bigPicture = document.querySelector('.big-picture');\nconst scrollOff = document.querySelector('body');\nconst bigPictureClose = bigPicture.querySelector('.big-picture__cancel');\nconst commentTemplate = document.querySelector('.social__comment');\nconst commentList = document.querySelector('.social__comments');\n\nlet commentsLoaded = [];\n\nconst commentCount = bigPicture.querySelector('.social__comment-count');\nconst commentsLoader = bigPicture.querySelector('.comments-loader');\n\nlet commentsCount = COMMENTS_LOAD_STEP;\n\n\nconst onBigPictureCloseClick = () => {\n  bigPicture.classList.add('hidden');\n  scrollOff.classList.remove('modal-open');\n  bigPictureClose.removeEventListener('click', onBigPictureCloseClick);\n  commentList.innerHTML = '';\n  document.removeEventListener('keydown', onBigPictureEscKeyDown);\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n};\n\n// функция вывода комментариев\n\nconst renderComment = (comment) => {\n  const commentSimilar = commentTemplate.cloneNode(true);\n\n  commentSimilar.querySelector('.social__picture').src = comment.avatar;\n  commentSimilar.querySelector('.social__picture').alt = comment.name;\n  commentSimilar.querySelector('.social__text').textContent = comment.message;\n\n  return commentSimilar;\n};\n\nconst renderComments = (comments) => {\n\n  const onCommentsLoaderClick = () => {\n    renderComments(comments);\n  }\n\n  commentsCount = (comments.length < COMMENTS_LOAD_STEP) ? comments.length : commentsCount;\n  commentsLoaded = comments.slice(0, commentsCount);\n\n  commentList.innerHTML = '';\n\n  commentCount.textContent = `${commentsLoaded.length} из ${comments.length} комментариев`;\n\n  let commentsListFragment = document.createDocumentFragment();\n\n  commentsLoaded.forEach(comment => {\n    commentsListFragment.appendChild(renderComment(comment));\n  });\n\n  commentList.appendChild(commentsListFragment);\n\n  if (comments.length > COMMENTS_LOAD_STEP && commentsLoaded.length < comments.length) {\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click', onCommentsLoaderClick, {once: true})\n  } else {\n    commentsLoader.classList.add('hidden');\n  }\n\n  commentsCount += COMMENTS_LOAD_STEP;\n}\n\nconst onBigPictureEscKeyDown = (evt) => {\n  if (checkEsc(evt)) {\n    onBigPictureCloseClick()\n  }\n}\n\n// функция вывода большой картинки/поста\nconst show = (picture) => {\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n  scrollOff.classList.add('modal-open');\n  bigPicture.querySelector('.big-picture__img > img').src = picture.url;\n  bigPicture.querySelector('.likes-count').textContent = picture.likes;\n  bigPicture.querySelector('.social__caption').textContent = picture.description;\n\n  bigPictureClose.addEventListener('click', onBigPictureCloseClick);\n  bigPicture.classList.remove('hidden');\n\n  document.addEventListener('keydown', onBigPictureEscKeyDown)\n\n  renderComments(picture.comments.slice())\n};\n\nexport { show };\n","// import photos from './data.js';\nimport { show } from './big-pictures.js';\n\nconst pictureTemplate = document.querySelector('#picture').content.querySelector('.picture');\nconst picturesList = document.querySelector('.pictures');\n\nconst renderPhoto = (picture) => {\n  const photoPreview = pictureTemplate.cloneNode(true);\n\n  photoPreview.querySelector('.picture__img').src = picture.url;\n  photoPreview.querySelector('.picture__likes').textContent = picture.likes;\n  photoPreview.querySelector('.picture__comments').textContent = picture.comments.length;\n\n  photoPreview.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    show(picture);\n  });\n\n  return photoPreview;\n};\n\nconst renderPhotos = (photos) => {\n  let picturesListFragment = document.createDocumentFragment();\n\n  photos.forEach((photo) => {\n    picturesListFragment.appendChild(renderPhoto(photo));\n  });\n\n  picturesList.appendChild(picturesListFragment);\n}\n\n\nexport { renderPhotos };\n","const Urls = {\n  GET: 'https://23.javascript.pages.academy/kekstagram/data',\n  POST: 'https://23.javascript.pages.academy/kekstagram',\n}\n\nconst request = (onSuccess, onError, method, data) => {\n  fetch(Urls[method],\n    {\n      method: method,\n      body: data,\n    })\n    .then((response) => response.json())\n    .then((response) => {\n      onSuccess(response)\n    })\n    .catch(() => {\n      onError()\n    })\n}\n\nexport { request }\n","import { checkEsc } from './util.js';\n\nconst main = document.querySelector('main');\nconst errorTemplate = document.querySelector('#error').content;\nconst errorFragment = document.createDocumentFragment();\nconst successTemplate = document.querySelector('#success').content;\nconst successFragment = document.createDocumentFragment();\n\nconst onAlertEscKeydown = (evt) => {\n  if (checkEsc(evt)) {\n    removeAllert();\n  }\n}\n\nconst removeAllert = (type) => {\n  document.querySelector(type).remove();\n  document.removeEventListener('keydown', onAlertEscKeydown);\n};\n\nconst showError = (text, button) => {\n  const errorElement = errorTemplate.cloneNode(true);\n\n  errorElement.querySelector('.error__title').textContent = text;\n  errorElement.querySelector('.error__button').textContent = button;\n\n  const errorButton = errorElement.querySelector('.error__button');\n\n  errorElement.querySelector('.error').addEventListener('click', (evt) => {\n    let element = evt.target.classList;\n    if (!element.contains('error__inner')) {\n      removeAllert('.error')\n    }\n  });\n\n  errorButton.addEventListener('click', () => {\n    removeAllert('.error');\n  })\n\n  document.addEventListener('keydown', onAlertEscKeydown);\n\n  errorFragment.appendChild(errorElement);\n  main.appendChild(errorFragment);\n}\n\nconst showSuccess = (text) => {\n  const successElement = successTemplate.cloneNode(true);\n\n  successElement.querySelector('.success__title').textContent = text;\n\n  const successButton = successElement.querySelector('.success__button');\n\n  successElement.querySelector('.success').addEventListener('click', (evt) => {\n    let element = evt.target.classList;\n    if (!element.contains('success__inner')) {\n      removeAllert('.success')\n    }\n  });\n\n  successButton.addEventListener('click', () => {\n    removeAllert('.success');\n  })\n\n  document.addEventListener('keydown', onAlertEscKeydown);\n\n  successFragment.appendChild(successElement);\n  main.appendChild(successFragment);\n}\n\nexport { showError, showSuccess };\n","import { request } from './fetch.js';\nimport { showError, showSuccess } from './alerts.js';\nimport { checkEsc } from './util.js';\n\nconst Scale = {\n  MAX: 100,\n  MIN: 25,\n  STEP: 25,\n}\n\nconst scrollOff = document.querySelector('body');\nconst uploadModal = document.querySelector('.img-upload__overlay');\nconst uploadInput = document.querySelector('#upload-file');\nconst uploadModalClose = document.querySelector('#upload-cancel');\n\n// открываем окно фильтров после загрузки файла\nuploadInput.addEventListener('change', () => {\n  resetSettings();\n  uploadModal.classList.remove('hidden');\n  scrollOff.classList.add('modal-open');\n})\n\n// закрытие окна\nconst closeModal = () => {\n  uploadModal.classList.add('hidden');\n  scrollOff.classList.remove('modal-open');\n  uploadInput.value = '';\n}\n\nuploadModalClose.addEventListener('click', function () {\n  closeModal();\n})\n\ndocument.addEventListener('keydown', (evt) => {\n  if (checkEsc(evt)) {\n    closeModal();\n  }\n});\n\n// зум картинки\nconst buttonPlus = uploadModal.querySelector('.scale__control--bigger');\nconst buttonMinus = uploadModal.querySelector('.scale__control--smaller');\nconst scaleValue = uploadModal.querySelector('.scale__control--value');\nconst imagePreview = uploadModal.querySelector('.img-upload__preview > img');\n\nconst resetSettings = () => {\n  imagePreview.style = 'transform: scale(1.00)'\n  scaleValue.value = '100%';\n}\n\nbuttonPlus.addEventListener('click', () => {\n  let scale = parseInt(scaleValue.value, 10) + Scale.STEP;\n\n  if (scale >= Scale.MAX) {\n    scale = Scale.MAX;\n  }\n\n  scaleValue.value = scale + '%';\n  scale = scale / 100;\n  imagePreview.style.transform = 'scale(' + scale + ')';\n})\n\nbuttonMinus.addEventListener('click', () => {\n  let scale = parseInt(scaleValue.value, 10) - Scale.STEP;\n\n  if (scale <= Scale.MIN) {\n    scale = Scale.MIN;\n  }\n\n  scaleValue.value = scale + '%';\n  scale = scale / 100;\n  imagePreview.style.transform = 'scale(' + scale + ')';\n})\n\n\n// Отправляем фотку\nconst uploadForm = document.querySelector('.img-upload__form');\n\nconst onSuccess = () => {\n  showSuccess('Удачно!')\n  closeModal();\n  uploadForm.reset();\n}\n\nconst onError = () => {\n  showError('ЧТо-то пошло не так', 'Загрузить другой файл');\n}\n\n\nuploadForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n\n  request(onSuccess, onError, 'POST', new FormData(evt.target))\n})\n\nexport { closeModal };\n","import { checkEsc } from './util.js';\n\nlet MAX_SYMBOLS = 20;\nlet MAX_HASHTAGS = 5;\nlet MAX_COMMENTLENGTH = 140;\n\nlet inputHashtag = document.querySelector('.text__hashtags');\nlet inputComment = document.querySelector('.text__description');\n\ninputComment.addEventListener('input', () => {\n  inputComment.setCustomValidity('');\n  let inputCommentText = inputComment.value;\n\n  if (inputCommentText.length > MAX_COMMENTLENGTH) {\n    inputComment.setCustomValidity('Максимум 140 символов');\n  }\n})\n\ninputHashtag.addEventListener('input', () => {\n  inputHashtag.setCustomValidity('');\n\n  let inputText = inputHashtag.value.toLowerCase().trim();\n\n  if (!inputText) {\n    return;\n  }\n\n  let inputArray = inputText.split(/\\s+/);\n\n  if (inputArray.length === 0) {\n    return;\n  }\n\n  const isStartNotHashtag = inputArray.some((item) => {\n    return item[0] !== '#';\n  });\n  if (isStartNotHashtag) {\n    inputHashtag.setCustomValidity('Хэш-тег начинается с символа # (решётка)');\n\n  }\n\n  const isOnlyLatticeHashtag = inputArray.some((item) => {\n    return item === '#';\n  });\n  if (isOnlyLatticeHashtag) {\n    inputHashtag.setCustomValidity('Хэш-тег не может состоять только из решетки')\n  }\n\n  const isSplitSpaceHashtag = inputArray.some((item) => {\n    return item.indexOf('#', 1) >= 1;\n  });\n  if (isSplitSpaceHashtag) {\n    inputHashtag.setCustomValidity('Хэш-теги разделяются пробелами');\n  }\n\n  const isRepeatingHashtag = inputArray.some((item, i, arr) => {\n    return arr.indexOf(item, i + 1) >= i + 1;\n  });\n  if (isRepeatingHashtag) {\n    inputHashtag.setCustomValidity('Хэш-теги не должны повторяться');\n  }\n\n  const isLongHashtag = inputArray.some((item) => {\n    return item.length > MAX_SYMBOLS;\n  });\n  if (isLongHashtag) {\n    inputHashtag.setCustomValidity('Максимальная длина хэш-тега 20 символов, включая решетку');\n  }\n\n  if (inputArray.length > MAX_HASHTAGS) {\n    inputHashtag.setCustomValidity('Максимум 5 хэш-тегов');\n  }\n})\n\nconst onEscapeDown = (evt) => {\n  if (checkEsc(evt)) {\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n}\n\ninputHashtag.addEventListener('keydown', onEscapeDown)\ninputComment.addEventListener('keydown', onEscapeDown)\n","import { renderPhotos } from './pictures.js';\nimport { request } from './fetch.js';\nimport { showError } from './alerts.js';\nimport { shuffleArray, debounce } from './util.js';\nimport './editor.js';\nimport './effects.js';\nimport './validation.js';\nimport './load-file.js';\n\n\nconst DEFAULT_PREVIEW_LOAD = 19;\nconst RANDOM_PREVIEW_LOAD = 5;\n\nconst filter = document.querySelector('.img-filters');\nlet photos = [];\n\n\nfunction removeActiveClass() {\n  let activeFilter = document.querySelector('.img-filters__button--active');\n  activeFilter.classList.remove('img-filters__button--active');\n}\n\nconst removePhotos = () => {\n  const images = document.querySelectorAll('.picture');\n  if (images) {\n    images.forEach(element => {\n      element.remove();\n    });\n  }\n}\n\nconst filters = {\n  'filter-default': () => {\n    renderPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD))\n  },\n  'filter-random': () => {\n    renderPhotos(shuffleArray(photos.slice()).slice(0, RANDOM_PREVIEW_LOAD));\n\n  },\n  'filter-discussed': () => {\n    renderPhotos(photos.slice().sort((a, b) => {\n      return b.comments.length - a.comments.length;\n    }))\n  },\n}\n\nconst onSuccess = (data) => {\n  filter.classList.remove('img-filters--inactive');\n  photos = data.slice()\n  renderPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD))\n}\n\nconst onError = () => {\n  showError('Ошибка загрузки, попробуйте еще раз', 'Закрыть')\n}\n\nrequest(onSuccess, onError, 'GET')\n\nconst onFilterClick = debounce((evt) => {\n  if (evt.target.classList.contains('img-filters__button')) {\n    removeActiveClass();\n    removePhotos();\n    evt.target.classList.add('img-filters__button--active')\n    filters[evt.target.id]()\n  }\n})\n\nfilter.addEventListener('click', onFilterClick)\n\n"],"names":["effectRadioGroup","document","querySelector","effectLevel","effectLevelSlider","uploadPreviewImg","effectLevelValue","classList","add","lastClass","effects","none","chrome","remove","parseInt","value","sepia","marvin","Math","floor","phobos","heat","addEventListener","evt","target","contains","noUiSlider","set","currentClass","style","filter","replace","create","range","min","max","start","connect","on","round","get","FILE_TYPES","uploadFile","uploadPreview","previews","querySelectorAll","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","width","height","forEach","backgroundImage","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","checkEsc","key","bigPicture","scrollOff","bigPictureClose","commentTemplate","commentList","commentsLoaded","commentCount","commentsLoader","commentsCount","onBigPictureCloseClick","removeEventListener","innerHTML","onBigPictureEscKeyDown","renderComments","comments","length","slice","textContent","commentsListFragment","createDocumentFragment","comment","appendChild","commentSimilar","cloneNode","avatar","alt","message","renderComment","once","pictureTemplate","content","picturesList","renderPhotos","photos","picturesListFragment","photo","picture","photoPreview","url","likes","preventDefault","description","show","renderPhoto","Urls","GET","POST","request","onSuccess","onError","method","data","fetch","body","then","response","json","catch","main","errorTemplate","errorFragment","successTemplate","successFragment","onAlertEscKeydown","removeAllert","type","showError","text","button","errorElement","errorButton","uploadModal","uploadInput","uploadModalClose","resetSettings","closeModal","buttonPlus","buttonMinus","scaleValue","imagePreview","scale","transform","uploadForm","successElement","successButton","showSuccess","reset","FormData","inputHashtag","inputComment","setCustomValidity","inputText","trim","inputArray","split","item","indexOf","i","arr","onEscapeDown","stopPropagation","filters","j","temp","random","shuffleArray","sort","a","b","onFilterClick","cb","lastTimeout","args","window","clearTimeout","setTimeout","images","element","removePhotos","id","debounce"],"sourceRoot":""}